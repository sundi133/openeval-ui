(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{1357:function(e,t,s){Promise.resolve().then(s.bind(s,6803))},6803:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(3827),r=s(4990),n=s(8792),l=s(1693),i=s(6269),c=s(4090);s(2445);var d=s(7908),o=s(7535),h=s(8024),x=function(e){let{searchTerm:t}=e,{isLoaded:s,userId:r,sessionId:i,getToken:x}=(0,l.aC)(),u="px-4 py-2 leading-5 text-center bg-gray-50 text-sm text-gray-900 tracking-wider whitespace-no-wrap",m="text-sm px-6 py-4 leading-5 text-center bg-white text-sm text-gray-900 tracking-wider whitespace-no-wrap leading-5",[g,p]=(0,c.useState)([]),[j,f]=(0,c.useState)(null),[v,y]=(0,c.useState)("No dataset found. Why not create a new dataset? Click the button\n  above to get started!"),[N,w]=(0,c.useState)(!0),[b,k]=(0,c.useState)(0),{session:_}=(0,l.ll)(),[S,z]=(0,c.useState)("");if((0,c.useEffect)(()=>{let e=async()=>{try{var e;w(!0),z(null!==(e=null==_?void 0:_.lastActiveOrganizationId)&&void 0!==e?e:""),k(1),(null==_?void 0:_.lastActiveOrganizationId)?y("No dataset found. Why not create a new dataset? Click the button\n            above to get started!"):(k(0),y("No organization found. Please create an organization first."))}catch(e){console.error("Error fetching user data:",e)}finally{w(!1)}};_&&e()},[_]),(0,c.useEffect)(()=>{let e=async()=>{try{if(w(!0),""!==t.trim()){let e=(await d.Z.get("".concat("http://0.0.0.0:8000","/api/dataset/search"),{params:{org_id:null==_?void 0:_.lastActiveOrganizationId,user_id:r,search:t}})).data;p(e)}else{let e=(await d.Z.get("".concat("http://0.0.0.0:8000","/api/dataset/list"),{params:{org_id:null==_?void 0:_.lastActiveOrganizationId,user_id:r}})).data;p(e)}w(!1),k(1)}catch(e){k(0),console.error("Error fetching:",e),w(!1)}};_&&(null==_?void 0:_.lastActiveOrganizationId)&&e()},[t]),!_)return null;let C=e=>{f(t=>t&&t.id===e.id?null:e)};return!N&&s&&r&&_?(0,a.jsx)("div",{className:"container min-w-full",style:{marginTop:"16px"},children:0===g.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("p",{children:1===b?(0,a.jsx)(a.Fragment,{children:v}):(0,a.jsxs)("div",{children:[v,(0,a.jsxs)(n.default,{href:"/create-organization",className:"text-blue-500",children:[" ","Click here to get started"]})]})})}),(0,a.jsx)("div",{className:"text-center mt-10",style:{marginTop:"32px"},children:(0,a.jsx)(n.default,{href:"/add/dataset",children:(0,a.jsx)("button",{className:"bg-gray-900 mt-5 text-white px-8 py-4 text-lg font-semibold rounded hover:bg-gray-700 hover:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50",disabled:!_,children:(0,a.jsxs)("span",{className:"relative inline-flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"\xa0 Create Dataset"]})})})})]}):(0,a.jsxs)("table",{className:"container min-w-full border-collapse border table-auto",style:{marginTop:"16px"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:u,children:"Timestamp"}),(0,a.jsx)("th",{className:u,children:"Name"}),(0,a.jsx)("th",{className:u,children:"DataType"}),(0,a.jsx)("th",{className:u,children:"ChatType"}),(0,a.jsx)("th",{className:u,children:"ModelUsed"}),(0,a.jsx)("th",{className:u,children:"ChunkSize"}),(0,a.jsx)("th",{className:u,children:"Status"}),(0,a.jsx)("th",{className:u,children:"View"})]})}),(0,a.jsx)("tbody",{className:"bg-white",children:g.map(e=>{var t,s;return(0,a.jsxs)(c.Fragment,{children:[(0,a.jsxs)("tr",{onClick:()=>C(e),children:[(0,a.jsx)("td",{className:m,children:new Date(e.ts).toLocaleString()}),(0,a.jsx)("td",{className:m,children:e.name}),(0,a.jsx)("td",{className:m,children:e.dataset_type}),(0,a.jsx)("td",{className:m,children:null!==(t=e.qa_type)&&void 0!==t?t:""}),(0,a.jsx)("td",{className:m,children:e.model_name}),(0,a.jsx)("td",{className:m,children:null!==(s=e.chunk_size)&&void 0!==s?s:2e3}),(0,a.jsxs)("td",{className:m,children:["completed"===e.status&&(0,a.jsx)(h.G,{icon:o.f8k,style:{color:"green"}}),"in_progress"===e.status&&(0,a.jsx)(h.G,{icon:o.LM3,spin:!0,style:{color:"blue"}}),"error"===e.status&&(0,a.jsx)(h.G,{icon:o.nYk,style:{color:"red"}}),(!e.status||""===e.status)&&""]}),(0,a.jsx)("td",{className:m,children:(0,a.jsx)(n.default,{href:"/view/datasets/".concat(e.id),rel:"noopener noreferrer",children:(0,a.jsx)(h.G,{icon:o._tD,className:"text-sm text-gray-900 hover:text-blue-500"})})})]},e.id),j&&j.id===e.id&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:9,className:"px-4 py-2",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Persona:"})," ",e.persona]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Demographic Group:"})," ",e.demographic]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Sentiment"})," ",e.sentiment]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Behavior:"})," ",e.behavior]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Resdient:"})," ",e.resident_type]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Family Status:"})," ",e.family_status]})]})})})]},e.id)})})]})}):(0,a.jsx)("div",{className:"container min-w-full text-sm",style:{marginTop:"16px"},children:"Loading..."})};function u(e){let{searchParams:t}=e,{session:s}=(0,l.ll)(),[d,o]=(0,c.useState)("");if(!s)return null;let h=async e=>{"Enter"===e.key&&o(e.currentTarget.value)};return(0,a.jsx)("div",{children:(0,a.jsx)(l.a7,{children:s?(0,a.jsxs)("main",{className:"p-4 md:p-10 mx-auto max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[" ",(0,a.jsxs)("div",{className:"relative flex items-center w-full",children:[" ",(0,a.jsx)("input",{disabled:!s,type:"text",placeholder:"Search dataset... press enter to submit",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onKeyDown:h}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"})})]}),(0,a.jsx)(n.default,{href:"/add/dataset",children:(0,a.jsx)(r.z,{className:"bg-gray-900 text-white hover:bg-gray-700 border-white hover:border-white pl-4",disabled:!s,children:(0,a.jsxs)("span",{className:"relative inline-flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"\xa0 New Dataset"]})})})]}),(0,a.jsx)(x,{searchTerm:d})]}):(0,a.jsx)(a.Fragment,{children:"Loading..."})})})}},4990:function(e,t,s){"use strict";s.d(t,{z:function(){return a.Z}});var a=s(886)},2445:function(){}},function(e){e.O(0,[3676,1693,8682,886,8792,7908,9506,8124,2971,8069,1744],function(){return e(e.s=1357)}),_N_E=e.O()}]);