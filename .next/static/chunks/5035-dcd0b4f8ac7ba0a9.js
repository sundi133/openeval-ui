(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5035],{5035:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(7294),r=a(9356);a(9182);var i=a(5121);s.default=e=>{let{datagen_id:s,size:a}=e,[n,c]=(0,l.useState)([]),{session:d}=(0,r.ll)(),[o,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[j,p]=(0,l.useState)(!1),[g,u]=(0,l.useState)(0),[N,v]=(0,l.useState)(0),[b,f]=(0,l.useState)(0),[_,w]=(0,l.useState)(""),[y,S]=(0,l.useState)(""),[k,q]=(0,l.useState)(""),[C,A]=(0,l.useState)(""),[O,J]=(0,l.useState)(""),[z,E]=(0,l.useState)(!1),[Q,R]=(0,l.useState)(""),[F,I]=(0,l.useState)(!1),P="px-4 py-2 leading-5 text-center bg-gray-50 text-sm text-gray-900 tracking-wider",D="px-6 py-4 leading-5 text-center bg-white text-sm text-gray-900 tracking-wider whitespace-no-wrap leading-5";if((0,l.useEffect)(()=>{let e=async()=>{await T(),await L()};if("completed"===C||"error"===C)I(!0);else{e();let s=setInterval(()=>{e()},5e3);return()=>clearInterval(s)}},[d,C]),!d||!s)return null;let L=async()=>{try{E(!0);let e=(await i.Z.get("".concat("http://0.0.0.0:8000","/api/qa-data"),{params:{dataset_id:s,org_id:d.lastActiveOrganizationId,skip:0,limit:100}})).data;c(e)}catch(e){console.error("Error fetching QA data:",e)}finally{E(!1)}},T=async()=>{try{var e;E(!0);let a=(await i.Z.get("".concat("http://0.0.0.0:8000","/api/dataset"),{params:{dataset_id:s,org_id:d.lastActiveOrganizationId}})).data;m(a.name),h(a.ts),u(a.number_of_questions),f(a.sample_size),v(null!==(e=a.chunk_size)&&void 0!==e?e:2e3),w(a.persona),J(a.dataset_type),A(a.status),S(a.data_source),R(a.error_msg),q(a.tags)}catch(e){console.error("Error fetching dataset details:",e)}finally{E(!1)}};return(0,t.jsx)("main",{className:"p-4 md:p-10 mx-auto max-w-".concat(a),children:(0,t.jsx)("div",{children:d?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-4",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-4 items-center justify-center",children:[o," (.",O.toLowerCase(),")"]}),(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Created At:"}),(0,t.jsx)("div",{className:"text-gray-700",children:new Date(x).toLocaleString()})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Questions Per Sample:"}),(0,t.jsx)("div",{className:"text-gray-700",children:g})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Sample Percentage:"}),(0,t.jsxs)("div",{className:"text-gray-700",children:[b," %"]})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Chunk Size:"}),(0,t.jsx)("div",{className:"text-gray-700",children:N})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Status:"}),(0,t.jsx)("div",{className:"completed"===C?"text-green-500":"text-red-500",children:C})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Data Source:"}),(0,t.jsx)("div",{className:"text-gray-700",children:y})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-8 text-sm",children:(0,t.jsxs)("div",{className:"col-span-12",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Persona:"}),(0,t.jsx)("div",{className:"text-gray-700",children:_})]})}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-8 text-sm",children:(0,t.jsxs)("div",{className:"col-span-12",children:[(0,t.jsx)("div",{className:"font-bold mb-2",children:"Tags:"}),(0,t.jsx)("div",{className:"text-gray-700",children:k})]})}),!F&&(0,t.jsx)("div",{className:"mt-4 grid grid-cols-12 text-sm",children:(0,t.jsx)("div",{className:"flex justify-start items-justify-start",children:(0,t.jsx)("div",{className:"loader"})})})]}),(0,t.jsxs)("table",{className:"w-full mt-2 border-collapse border table-auto",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:P,children:"Timestamp"}),(0,t.jsx)("th",{className:P,children:"Chat Messages"}),(0,t.jsx)("th",{className:P,children:"Reference Chunk"})]})}),(0,t.jsxs)("tbody",{children:[0===n.length&&(0,t.jsx)("tr",{className:"border-b",children:(0,t.jsx)("td",{colSpan:3,className:D,children:(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsx)("p",{children:Q})})})}),n.length>0&&n.map(e=>(0,t.jsxs)(l.Fragment,{children:[j&&j===e.id&&(0,t.jsx)("tr",{className:"border-b",children:(0,t.jsx)("td",{colSpan:3,className:"px-6 py-4 leading-5 bg-white text-sm text-gray-900 whitespace-no-wrap leading-5",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Reference Chunk:"})}),(0,t.jsx)("p",{children:e.reference_chunk})]})})}),(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:D,style:{verticalAlign:"top"},children:e.ts}),(0,t.jsx)("td",{className:D,style:{verticalAlign:"top"},children:(0,t.jsxs)("ul",{className:"text-left space-y-4",children:[JSON.parse(e.chat_messages).question_answer&&(0,t.jsxs)("li",{className:"mb-2",children:[(0,t.jsx)("strong",{children:"Question:"})," ",JSON.parse(e.chat_messages).question_answer.question,(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Answer:"})," ",JSON.parse(e.chat_messages).question_answer.answer]}),JSON.parse(e.chat_messages).question_answer&&[...[,,,].keys()].map(s=>JSON.parse(e.chat_messages).question_answer["follow_up_question_".concat(s+1)]&&(0,t.jsxs)("li",{children:[(0,t.jsxs)("strong",{children:["Follow-up Question ",s+1,": "]}),JSON.parse(e.chat_messages).question_answer["follow_up_question_".concat(s+1)],","," ",(0,t.jsx)("br",{}),(0,t.jsxs)("strong",{children:["Follow-up Answer ",s+1,": "]})," ",JSON.parse(e.chat_messages).question_answer["follow_up_answer_".concat(s+1)]]},s+1))]})}),(0,t.jsx)("td",{className:D,style:{verticalAlign:"top"},children:(0,t.jsx)("button",{className:"text-blue-500 underline cursor-pointer",onClick:()=>p(j===e.id?null:e.id),children:j===e.id?"Collapse Reference":"Expand Reference"})})]})]},e.id))]})]})]}):(0,t.jsx)("div",{children:z?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Chat QA data generation is in progress for ",(0,t.jsx)("span",{className:"font-bold",children:o})]}),(0,t.jsx)("button",{className:"bg-gray-700 text-sm text-white px-4 py-2 rounded-md mt-4",onClick:()=>{T(),L()},disabled:z,children:"Refresh"})]})})})})}},9182:function(){}}]);