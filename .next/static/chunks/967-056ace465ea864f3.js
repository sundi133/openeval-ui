"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{9079:function(e,t,n){var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(3127)},3127:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],u=!1,l=-1;function d(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(r=c,c=[];++l<t;)r&&r[l].run();l=-1,t=c.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||u||a(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}},s=!0;try{t[e](i,i.exports,r),s=!1}finally{s&&delete n[e]}return i.exports}r.ab="//";var o=r(229);e.exports=o}()},967:function(e,t,n){n.d(t,{eA:function(){return U},zB:function(){return R},kP:function(){return _}});var r,o,i,s,a,c=n(3827),u=n(4090),l=n.t(u,2);class d extends Error{constructor(e,t){var n,r;e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),null===(n=(r=Error).captureStackTrace)||void 0===n||n.call(r,this,this.constructor),this.name=e instanceof d?e.name:this.constructor.name}}class f extends d{}class v extends d{}async function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="".concat(t.basePath,"/").concat(e);try{var i;let e={headers:{"Content-Type":"application/json",...(null==r?void 0:null===(i=r.headers)||void 0===i?void 0:i.cookie)?{cookie:r.headers.cookie}:{}}};(null==r?void 0:r.body)&&(e.body=JSON.stringify(r.body),e.method="POST");let t=await fetch(o,e),n=await t.json();if(!t.ok)throw n;return n}catch(e){return n.error(new f(e.message,e)),null}}function p(){return Math.floor(Date.now()/1e3)}function w(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let n=new URL(null!=e?e:t),r=("/"===n.pathname?t.pathname:n.pathname).replace(/\/$/,""),o="".concat(n.origin).concat(r);return{origin:n.origin,host:n.host,path:r,base:o,toString:()=>o}}var g=n(9079);let m={baseUrl:w(null!==(o=g.env.NEXTAUTH_URL)&&void 0!==o?o:g.env.VERCEL_URL).origin,basePath:w(g.env.NEXTAUTH_URL).path,baseUrlServer:w(null!==(s=null!==(i=g.env.NEXTAUTH_URL_INTERNAL)&&void 0!==i?i:g.env.NEXTAUTH_URL)&&void 0!==s?s:g.env.VERCEL_URL).origin,basePathServer:w(null!==(a=g.env.NEXTAUTH_URL_INTERNAL)&&void 0!==a?a:g.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}};function y(){return"undefined"!=typeof BroadcastChannel?new BroadcastChannel("next-auth"):{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}}let E={debug:console.debug,error:console.error,warn:console.warn},T=null===(r=u.createContext)||void 0===r?void 0:r.call(l,void 0);function _(e){if(!T)throw Error("React Context is unavailable in Server Components");let t=u.useContext(T),{required:n,onUnauthenticated:r}=null!=e?e:{},o=n&&"unauthenticated"===t.status;return(u.useEffect(()=>{if(o){let e="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));r?r():window.location.href=e}},[o,r]),o)?{data:t.data,update:t.update,status:"loading"}:t}async function b(e){var t;let n=await h("session",m,E,e);return(null===(t=null==e?void 0:e.broadcast)||void 0===t||t)&&y().postMessage({event:"session",data:{trigger:"getSession"}}),n}async function L(){let e=await h("csrf",m,E);return null==e?void 0:e.csrfToken}async function S(){return h("providers",m,E)}async function R(e,t,n){let{callbackUrl:r=window.location.href,redirect:o=!0}=null!=t?t:{},i=m.basePath,s=await S();if(!s){window.location.href="".concat(i,"/error");return}if(!e||!(e in s)){window.location.href="".concat(i,"/signin?").concat(new URLSearchParams({callbackUrl:r}));return}let a="credentials"===s[e].type,c="email"===s[e].type,u="".concat(i,"/").concat(a?"callback":"signin","/").concat(e),l="".concat(u,"?").concat(new URLSearchParams(n)),d=await fetch(l,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:await L(),callbackUrl:r})}),f=await d.json();if(o||!(a||c)){var v;let e=null!==(v=f.url)&&void 0!==v?v:r;window.location.href=e,e.includes("#")&&window.location.reload();return}let h=new URL(f.url).searchParams.get("error");return d.ok&&await m._getSession({event:"storage"}),{error:h,status:d.status,ok:d.ok,url:h?null:f.url}}function U(e){if(!T)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:n,refetchInterval:r,refetchWhenOffline:o}=e;n&&(m.basePath=n);let i=void 0!==e.session;m._lastSync=i?p():0;let[s,a]=u.useState(()=>(i&&(m._session=e.session),e.session)),[l,d]=u.useState(!i);u.useEffect(()=>(m._getSession=async function(){let{event:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t="storage"===e;if(t||void 0===m._session){m._lastSync=p(),m._session=await b({broadcast:!t}),a(m._session);return}if(!e||null===m._session||p()<m._lastSync)return;m._lastSync=p(),m._session=await b(),a(m._session)}catch(e){E.error(new v(e.message,e))}finally{d(!1)}},m._getSession(),()=>{m._lastSync=0,m._session=void 0,m._getSession=()=>{}}),[]),u.useEffect(()=>{let e=()=>m._getSession({event:"storage"});return y().addEventListener("message",e),()=>y().removeEventListener("message",e)},[]),u.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,n=()=>{t&&"visible"===document.visibilityState&&m._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),()=>document.removeEventListener("visibilitychange",n,!1)},[e.refetchOnWindowFocus]);let f=function(){let[e,t]=u.useState("undefined"!=typeof navigator&&navigator.onLine),n=()=>t(!0),r=()=>t(!1);return u.useEffect(()=>(window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}),[]),e}(),w=!1!==o||f;u.useEffect(()=>{if(r&&w){let e=setInterval(()=>{m._session&&m._getSession({event:"poll"})},1e3*r);return()=>clearInterval(e)}},[r,w]);let g=u.useMemo(()=>({data:s,status:l?"loading":s?"authenticated":"unauthenticated",async update(e){if(l||!s)return;d(!0);let t=await h("session",m,E,void 0===e?void 0:{body:{csrfToken:await L(),data:e}});return d(!1),t&&(a(t),y().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[s,l]);return(0,c.jsx)(T.Provider,{value:g,children:t})}}}]);